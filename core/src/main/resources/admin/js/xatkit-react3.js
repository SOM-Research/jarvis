(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,n){e.exports=n(159)},159:function(e,t,n){"use strict";n.r(t);var a=n(86),r=n(152),s=n(153),o=n(156),i=n(154),c=n(157),u=n(32),l=n.n(u),x=n(155),v=n.n(x),d=n(58),h=(n(164),n(59)),f=n.n(h),g=(n(373),function(e){function t(e){var n;Object(r.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),Object(d.toggleWidget)();var a=void 0===window.xatkit_server?"http://localhost:5000":window.xatkit_server,s=void 0===window.xatkit_username?"username":window.xatkit_username;return console.log("Connecting to server "+a),console.log("Using username "+s),n.state={username:s,channel:n.createUniqueChannel(),xatkit_server:a,connected:!1},n.pingServer(),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"pingServer",value:function(){var e=this;f.a.post(this.state.xatkit_server+"/react/ping",{json:!0,headers:{"xatkit-react":"true"}},function(t,n,r){if(t){return console.log("Cannot connect to the server "+e.state.xatkit_server+", trying to reconnect in 1000ms"),e.setState(Object(a.a)({},e.state,{connected:!1})),void setTimeout(function(){return e.pingServer()},1e3)}return console.log("Connected to the server "+e.state.xatkit_server),void e.setState(Object(a.a)({},e.state,{connected:!0}))})}},{key:"createUniqueChannel",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"handleNewUserMessage",value:function(e){var t=this,n={body:{username:this.state.username,channel:this.state.channel,message:e},json:!0,headers:{"xatkit-react":"true"}};f.a.post(this.state.xatkit_server+"/react",n,function(e,n,a){if(e)return console.log(e);setTimeout(function(){var e={body:{username:t.state.username,channel:t.state.channel},json:!0};f.a.post(t.state.xatkit_server+"/react/getAnswers",e,function(e,t,n){if(e)return console.log(e);if(console.log(n),void 0!==n.messages){var a=!0,r=!1,s=void 0;try{for(var o,i=n.messages[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var c=o.value;Object(d.addResponseMessage)(c.value)}}catch(e){r=!0,s=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw s}}}})},200)})}},{key:"render",value:function(){var e=this;return this.state.connected?l.a.createElement("div",{className:"XatkitApp"},l.a.createElement(d.Widget,{handleNewUserMessage:function(t){return e.handleNewUserMessage(t)},title:"Xatkit Chat",subtitle:"Test your Xatkit bot here!"})):null}}]),t}(u.Component));v.a.render(l.a.createElement(g,null),document.getElementById("xatkit-chat"))},178:function(e,t){},180:function(e,t){},212:function(e,t){},213:function(e,t){},282:function(e,t){},373:function(e,t,n){}},[[158,1,2]]]);
//# sourceMappingURL=main.962dc4cd.chunk.js.map